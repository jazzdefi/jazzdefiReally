{"ast":null,"code":"var _jsxFileName = \"/home/drab/Documents/jazzdefi/src/views/Farms/components/FarmTable/Actions/HarvestAction.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { Button } from '@jazzdefi/uikit';\nimport BigNumber from 'bignumber.js';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { useHarvest } from 'hooks/useHarvest';\nimport useI18n from 'hooks/useI18n';\nimport { usePriceCakeBusd } from 'state/hooks';\nimport { useCountUp } from 'react-countup';\nimport { ActionContainer, ActionTitles, Title, Subtle, ActionContent, Earned, Staked } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst HarvestAction = ({\n  pid,\n  userData\n}) => {\n  _s();\n\n  const {\n    account\n  } = useWeb3React();\n  const earningsBigNumber = userData && account ? new BigNumber(userData.earnings) : null;\n  const cakePrice = usePriceCakeBusd();\n  let earnings = null;\n  let earningsBusd = 0;\n  let displayBalance = '?';\n\n  if (earningsBigNumber) {\n    earnings = getBalanceNumber(earningsBigNumber);\n    earningsBusd = new BigNumber(earnings).multipliedBy(cakePrice).toNumber();\n    displayBalance = earnings.toLocaleString();\n  }\n\n  const [pendingTx, setPendingTx] = useState(false);\n  const {\n    onReward\n  } = useHarvest(pid);\n  const TranslateString = useI18n();\n  const {\n    countUp,\n    update\n  } = useCountUp({\n    start: 0,\n    end: earningsBusd,\n    duration: 1,\n    separator: ',',\n    decimals: 3\n  });\n  const updateValue = useRef(update);\n  useEffect(() => {\n    updateValue.current(earningsBusd);\n  }, [earningsBusd, updateValue]);\n  return /*#__PURE__*/_jsxDEV(ActionContainer, {\n    children: [/*#__PURE__*/_jsxDEV(ActionTitles, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"JAZZ \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Subtle, {\n        children: TranslateString(999, 'EARNED')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ActionContent, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Earned, {\n          children: displayBalance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Staked, {\n          children: [\"~\", countUp, \"USD\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: !earnings || pendingTx || !account,\n        onClick: async () => {\n          setPendingTx(true);\n          await onReward();\n          setPendingTx(false);\n        },\n        ml: \"4px\",\n        children: TranslateString(562, 'Harvest')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HarvestAction, \"zXLYtCnC+gjtoXlVrNqekrAPRYw=\", false, function () {\n  return [useWeb3React, usePriceCakeBusd, useHarvest, useI18n, useCountUp];\n});\n\n_c = HarvestAction;\nexport default HarvestAction;\n\nvar _c;\n\n$RefreshReg$(_c, \"HarvestAction\");","map":{"version":3,"sources":["/home/drab/Documents/jazzdefi/src/views/Farms/components/FarmTable/Actions/HarvestAction.tsx"],"names":["React","useState","useRef","useEffect","useWeb3React","Button","BigNumber","getBalanceNumber","useHarvest","useI18n","usePriceCakeBusd","useCountUp","ActionContainer","ActionTitles","Title","Subtle","ActionContent","Earned","Staked","HarvestAction","pid","userData","account","earningsBigNumber","earnings","cakePrice","earningsBusd","displayBalance","multipliedBy","toNumber","toLocaleString","pendingTx","setPendingTx","onReward","TranslateString","countUp","update","start","end","duration","separator","decimals","updateValue","current"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Button } from '@jazzdefi/uikit'\nimport BigNumber from 'bignumber.js'\nimport { FarmWithStakedValue } from 'views/Farms/components/FarmCard/FarmCard'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport { useHarvest } from 'hooks/useHarvest'\nimport useI18n from 'hooks/useI18n'\nimport { usePriceCakeBusd } from 'state/hooks'\nimport { useCountUp } from 'react-countup'\n\nimport { ActionContainer, ActionTitles, Title, Subtle, ActionContent, Earned, Staked } from './styles'\n\nconst HarvestAction: React.FunctionComponent<FarmWithStakedValue> = ({ pid, userData }) => {\n  const { account } = useWeb3React()\n  const earningsBigNumber = userData && account ? new BigNumber(userData.earnings) : null\n  const cakePrice = usePriceCakeBusd()\n  let earnings = null\n  let earningsBusd = 0\n  let displayBalance = '?'\n\n  if (earningsBigNumber) {\n    earnings = getBalanceNumber(earningsBigNumber)\n    earningsBusd = new BigNumber(earnings).multipliedBy(cakePrice).toNumber()\n    displayBalance = earnings.toLocaleString()\n  }\n\n  const [pendingTx, setPendingTx] = useState(false)\n  const { onReward } = useHarvest(pid)\n  const TranslateString = useI18n()\n\n  const { countUp, update } = useCountUp({\n    start: 0,\n    end: earningsBusd,\n    duration: 1,\n    separator: ',',\n    decimals: 3,\n  })\n  const updateValue = useRef(update)\n\n  useEffect(() => {\n    updateValue.current(earningsBusd)\n  }, [earningsBusd, updateValue])\n\n  return (\n    <ActionContainer>\n      <ActionTitles>\n        <Title>JAZZ </Title>\n        <Subtle>{TranslateString(999, 'EARNED')}</Subtle>\n      </ActionTitles>\n      <ActionContent>\n        <div>\n          <Earned>{displayBalance}</Earned>\n          <Staked>~{countUp}USD</Staked>\n        </div>\n        <Button\n          disabled={!earnings || pendingTx || !account}\n          onClick={async () => {\n            setPendingTx(true)\n            await onReward()\n            setPendingTx(false)\n          }}\n          ml=\"4px\"\n        >\n          {TranslateString(562, 'Harvest')}\n        </Button>\n      </ActionContent>\n    </ActionContainer>\n  )\n}\n\nexport default HarvestAction\n"]},"metadata":{},"sourceType":"module"}